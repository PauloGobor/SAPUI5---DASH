sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/ui/model/Filter",
	"sap/ui/model/FilterOperator"
	
], function (Controller, JSONModel, Filter, FilterOperator) {
	"use strict";
	return Controller.extend("DashVoos.ProjetVoosDash.controller.Voos", {
		/**
		 * Called when a controller is instantiated and its View controls (if available) are already created.
		 * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.
		 * @memberOf DashVoos.ProjetVoosDash.view.Voos
		 */
		onInit: function () {
			var e = sap.ui.core.UIComponent.getRouterFor(this);
			e.getRoute("Details").attachMatched(this._onRoute, this);
			
		},
		
		funcListItemPress: function (e) {
			var t = sap.ui.core.UIComponent.getRouterFor(this);
			var o = e.getSource().getBindingContext().getProperty("Flightcode");
			//{Flightcode}{Flightdate}
			var n = e.getSource().getBindingContext().getProperty("Flightdate");
			var i = "" + n;
			console.log(o);
			//	console.log(n);
			t.navTo("Details", {
				Flightcode: o,
				Flightdate: i // fix problem :Cannot read property 'length' of null
			});
		},
		/**
		 * Similar to onAfterRendering, but this hook is invoked before the controller's View is re-rendered
		 * (NOT before the first rendering! onInit() is used for that one!).
		 * @memberOf DashVoos.ProjetVoosDash.view.Voos
		 */
		//	onBeforeRendering: function() {
		//
		//	},
		/**
		 * Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.
		 * This hook is the same one that SAPUI5 controls get after being rendered.
		 * @memberOf DashVoos.ProjetVoosDash.view.Voos
		 */
		//	onAfterRendering: function() {
		//
		//	},
		_onRoute: function (e) {
				var oView = this.getView();
				//	var o2 = "/sflight_chartSet";
				var oChart = oView.byId("oVizFrame1");
		
				var sUrl = "/sap/opu/odata/sap/ZNEW_SRV/";
				var oModel = new sap.ui.model.odata.ODataModel(sUrl, true);
				oChart.setModel(oModel);

				oChart.setVizType("column");
			}
			/**
			 * Called when the Controller is destroyed. Use this one to free resources and finalize activities.
			 * @memberOf DashVoos.ProjetVoosDash.view.Voos
			 */
			//	onExit: function() {
			//
			//	}
			,
		/**
		 *@memberOf DashVoos.ProjetVoosDash.controller.Voos
		 */
		onFilter: function (oEvent) {
			var query = oEvent.getSource().getValue(); //recebe o valor digitado na caixa de texto
			var oFilter = [];
			//console.log(query);
			oFilter = new sap.ui.model.Filter("Flightcode", "Contains", query);
		//	oFilter.push(new Filter("Flightcode", "EQ", query));

			var oTable = this.getView().byId("table0");
			var binding = oTable.getBinding("items");

			binding.filter(oFilter); // momemtno que Ã© executado o filtro.

			//This code was generated by the layout editor.
		}
	});
});



	// _onRoute: function (e) {
	// 			var oView = this.getView();
	// 			//	var o2 = "/sflight_chartSet";
	// 			var oChart = oView.byId("oVizFrame1");
	// 			//		var sUrl = "/sap/opu/odata/sap/ZNEW_SRV/";
	// 			//		var oModel = new sap.ui.model.odata.ODataModel(sUrl, true);
	// 			//		oChart.setModel(oModel);
	// 			// oChart.removeAllFeeds();
	// 			// var dataset = new sap.viz.ui5.data.FlattenedDataset({
	// 			// 	dimensions: [{
	// 			// 		name: 'Flightode',
	// 			// 		value: "{sflight_chartSet/Flightode}"
	// 			// 	}],
	// 			// 	measures: [{
	// 			// 		name: 'Economy',
	// 			// 		value: '{sflight_chartSet/Economyoccupiedseats}'
	// 			// 	}, {
	// 			// 		name: 'Business',
	// 			// 		value: '{sflight_chartSet/Businessoccupiedseats}'
	// 			// 	}],
	// 			// 	data: {
	// 			// 		path: o2
	// 			// 			//,
	// 			// 			//filters: [oFilters2]
	// 			// 			/*	,
	// 			// 				parameters: {// expand: "HeadToDetailsNav",
	// 			// 					select: 'Flightcode,Flightdate'  
	// 			// 				}*/
	// 			// 	}
	// 			// });
	// 			// var feedValueAxis1 = new sap.viz.ui5.controls.common.feeds.FeedItem({
	// 			// 	'uid': "valueAxis",
	// 			// 	'type': "Measure",
	// 			// 	'values': ["Economy"]
	// 			// });
	// 			// var feedValueAxis2 = new sap.viz.ui5.controls.common.feeds.FeedItem({
	// 			// 	'uid': "valueAxis",
	// 			// 	'type': "Measure",
	// 			// 	'values': ["Business"]
	// 			// });
	// 			// var feedCategoryAxis1 = new sap.viz.ui5.controls.common.feeds.FeedItem({
	// 			// 	'uid': "categoryAxis",
	// 			// 	'type': "Dimension",
	// 			// 	'values': ["Flightode"]
	// 			// });
	// 			//	oChart.getDataset().getBinding("data").filter(oFilters2);
	// 			//binding.filter(oFilter);
	// 			//var oModel = new sap.ui.model.odata.ODataModel("/destinations/v4/abc/http/app.svc", oConfig);
	// 			var sUrl = "/sap/opu/odata/sap/ZNEW_SRV/";
	// 			var oModel = new sap.ui.model.odata.ODataModel(sUrl, true);
	// 			oChart.setModel(oModel);
	// 			// try
	// 			//	oChart.getDataset().getBinding("data").filter([oFilters2]);
	// 			//	oChart.setDataset(dataset);
	// 			//	oChart.addFeed(feedValueAxis1);
	// 			//	oChart.addFeed(feedValueAxis2);
	// 			//	oChart.addFeed(feedCategoryAxis1);
	// 			oChart.setVizType("column");
	// 		}